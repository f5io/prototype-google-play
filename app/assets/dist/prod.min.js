!function e(t,X,n){function i(o,r){if(!X[o]){if(!t[o]){var s="function"==typeof require&&require;if(!r&&s)return s(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=X[o]={exports:{}};t[o][0].call(u.exports,function(e){var X=t[o][1][e];return i(X?X:e)},u,u.exports,e,t,X,n)}return X[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e){function t(e,t,c,u){c=c||n.global.defaultEntry,u=u||n.global.defaultLanguage,n.global.language=u,n.global.entry=c,n.global.isCeltra&&r.init(e,window.Creative,t),r.trackEvent("ad-initialized");{var l=Math.min(460,Math.round(.8*X.windowWidth())),d=2*l+50,f="left",h="right",m="in",p="out",x=X('[role="container"]')[0],g=X('[role="arrows"]')[0],v=(X('[role="light"]')[0],X('[role="main"]')[0]),y=X('[role="cube"]')[0],b=X('[role="menu"]')[0],w=X('[role="loader"]')[0];X('[role="background"]')[0]}x.style[X.CSS_PERSPECTIVE]=d+"px";var C=n.global.isCeltra?n.BASE_URL:"";a.load([C+"assets/sound/click.mp3",C+"assets/img/cubes/"+u+"/"+c+"/side1.jpg",C+"assets/img/cubes/"+u+"/"+c+"/side2.jpg",C+"assets/img/cubes/"+u+"/"+c+"/side3.jpg",C+"assets/img/cubes/"+u+"/"+c+"/side4.jpg",C+"assets/img/cubes/"+u+"/"+c+"/side5.jpg",C+"assets/img/cubes/"+u+"/"+c+"/side6.jpg"]).then(function(){function e(e,n){n=n||h;var a=X.getElement("div","cube-container",{},{});y.appendChild(a);var r=Object.create(i);return r.init(l,l,0,e,a,{autoListen:!1,useInertia:!1,useBackgrounds:!0,useContent:!0,normaliseFacialRotation:!0}),r.getNormalisedFaceRotation(r.rotation,!0),r.render(),t(m,r,n),o.defineCubeProperties([r]),r}function t(e,t,n){return new Promise(function(i){var a=t.target,o=t.shadow,r=1.2*X.windowWidth(),c=function(){g.classList.remove("off");var e=X.emitter.on("first_cube_interaction",function(){g.classList.add("off"),e()});t.addInteractionListener()};e!==m||E?e===p&&(c=function(){a.parentNode.removeChild(o.element),a.parentNode.removeChild(a),t=null}):c=d;var u=e===p?0:n===f?-r:r,l=e===m?0:n===f?-r:r;a.style[X.CSS_TRANSFORM]+=" translateX("+u+"px)",o.translate.X=u,o.render(),s.tween().from(u).to(l).ease(s.easing[e===m?"easeOutCirc":"easeInCirc"]).step(function(e){a.style[X.CSS_TRANSFORM]=a.style[X.CSS_TRANSFORM].replace(/translateX\(.+\)/g,function(){return"translateX("+e+"px)"}),o.translate.X=1.1*e,o.render()}).complete(function(){c(t),i()}).start()})}function d(e){function t(r){s.tween().to(360).delay(400).duration(1e3).ease(s.easing.easeInOutQuad).step(function(t){i=i||t;var s=X.nearest(t,90),c=X.nearest(i,90);s!==c&&n.global.useSound&&e.sound.play(),e.rotation[o[r]]=a+t,e.render(),i=t}).complete(function(){if("LR"!==r){w.classList.add("off"),g.classList.remove("off");var n=X.emitter.on("first_cube_interaction",function(){g.classList.add("off"),n()});return void e.addInteractionListener()}i=void 0,e.forceRotationOfOppositeForFirstFace(),t("UD")}).start()}var i,a=0,o=e.getAxisDefinition(e.rotation);t("LR")}r.trackEvent("cube-loaded-"+c);var E,k=0,M=["music","books","apps","movies"],S=[];b.querySelector("."+c).classList.add("selected"),x.className=b.className="border-"+c,k=M.indexOf(c),X.emitter.on("debug_panel",function(e){v.classList[e?"add":"remove"]("covered")}),E=e(M[k]),M.forEach(function(X,n){var i=b.querySelector("."+X);S.push(i),i.addEventListener("touchend",function(){if(!i.classList.contains("selected")){r.trackEvent("menu-tapped-"+X,!0),S.forEach(function(e){e.classList.remove("selected")}),x.className=b.className="border-"+X,i.classList.add("selected");var o=k>n?f:h,s=k>n?h:f;k=n,w.classList.remove("off");var c=!g.classList.contains("off");g.classList.add("off"),t(p,E,s).then(function(){for(var t=[],n=1,i=6;i>=n;n++)t.push(C+"assets/img/cubes/"+u+"/"+X+"/side"+n+".jpg");a.load(t).then(function(){r.trackEvent("cube-loaded-"+X),w.classList.add("off"),c&&g.classList.remove("off"),E=e(X,o)})})}})}),document.addEventListener("touchmove",X.prevent)})}var X=e("./modules/utilities"),n=e("./modules/config"),i=e("./modules/cube"),a=(e("./modules/messaging"),e("./modules/assetmanager")),o=e("./modules/debug"),r=e("./modules/tracking"),s=e("interpol");X.isDefined(window.screen)&&X.isDefined(window.creative)?(n.global.isCeltra=!0,window.InitCube=t):X.ready(t)},{"./modules/assetmanager":5,"./modules/config":9,"./modules/cube":13,"./modules/debug":17,"./modules/messaging":18,"./modules/tracking":19,"./modules/utilities":20,interpol:2}],2:[function(e,t){(function(X){__browserify_shim_require__=e,function(e,t,X,n,i){!function(t){"undefined"!=typeof e&&e.exports?e.exports=t(window):self.Interpol=self.iN=t(window)}(function(e){"use strict";var t={};t.fps=60,t.easing={easeNone:function(e,t,X,n){return X*e/n+t},easeInQuad:function(e,t,X,n){return X*(e/=n)*e+t},easeOutQuad:function(e,t,X,n){return-X*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,X,n){return(e/=n/2)<1?X/2*e*e+t:-X/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,X,n){return X*(e/=n)*e*e+t},easeOutCubic:function(e,t,X,n){return X*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,X,n){return(e/=n/2)<1?X/2*e*e*e+t:X/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,X,n){return X*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,X,n){return-X*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,X,n){return(e/=n/2)<1?X/2*e*e*e*e+t:-X/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,X,n){return X*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,X,n){return X*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,X,n){return(e/=n/2)<1?X/2*e*e*e*e*e+t:X/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,X,n){return-X*Math.cos(e/n*(Math.PI/2))+X+t},easeOutSine:function(e,t,X,n){return X*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,X,n){return-X/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,X,n){return 0==e?t:X*Math.pow(2,10*(e/n-1))+t},easeOutExpo:function(e,t,X,n){return e==n?t+X:X*(-Math.pow(2,-10*e/n)+1)+t},easeInOutExpo:function(e,t,X,n){return 0==e?t:e==n?t+X:(e/=n/2)<1?X/2*Math.pow(2,10*(e-1))+t:X/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,X,n){return-X*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,X,n){return X*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,X,n){return(e/=n/2)<1?-X/2*(Math.sqrt(1-e*e)-1)+t:X/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,X,n){var i=1.70158,a=0,o=X;if(0==e)return t;if(1==(e/=n))return t+X;if(a||(a=.3*n),o<Math.abs(X)){o=X;var i=a/4}else var i=a/(2*Math.PI)*Math.asin(X/o);return-(o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-i)*Math.PI/a))+t},easeOutElastic:function(e,t,X,n){var i=1.70158,a=0,o=X;if(0==e)return t;if(1==(e/=n))return t+X;if(a||(a=.3*n),o<Math.abs(X)){o=X;var i=a/4}else var i=a/(2*Math.PI)*Math.asin(X/o);return o*Math.pow(2,-10*e)*Math.sin(2*(e*n-i)*Math.PI/a)+X+t},easeInOutElastic:function(e,t,X,n){var i=1.70158,a=0,o=X;if(0==e)return t;if(2==(e/=n/2))return t+X;if(a||(a=.3*n*1.5),o<Math.abs(X)){o=X;var i=a/4}else var i=a/(2*Math.PI)*Math.asin(X/o);return 1>e?-.5*o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-i)*Math.PI/a)+t:o*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*n-i)*Math.PI/a)*.5+X+t},easeInBack:function(e,t,X,n,i){return void 0==i&&(i=1.70158),X*(e/=n)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,X,n,i){return void 0==i&&(i=1.70158),X*((e=e/n-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,X,n,i){return void 0==i&&(i=1.70158),(e/=n/2)<1?X/2*e*e*(((i*=1.525)+1)*e-i)+t:X/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},easeInBounce:function(e,t,X,n){return X-this.easeOutBounce(n-e,0,X,n)+t},easeOutBounce:function(e,t,X,n){return(e/=n)<1/2.75?7.5625*X*e*e+t:2/2.75>e?X*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?X*(7.5625*(e-=2.25/2.75)*e+.9375)+t:X*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,X,n){return n/2>e?.5*this.easeInBounce(2*e,0,X,n)+t:.5*this.easeOutBounce(2*e-n,0,X,n)+.5*X+t}},t.rafLast=0,t.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(e){var X=(new Date).getTime(),n=Math.max(0,16-(X-t.rafLast)),i=window.setTimeout(function(){e(X+n)},n);return t.rafLast=X+n,i}}(),t.cancelAnimFrame=function(){return e.cancelAnimationFrame||e.cancelRequestAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelAnimationFrame||e.mozCancelRequestAnimationFrame||function(e){clearTimeout(e)}}(),t.noop=function(){},t.tick=function(){var X=this;return function(){if(X.raf=t.requestAnimFrame.call(e,t.tick.call(X)),X.now=(new Date).getTime(),X.delta=X.now-X.then,X.delta>X.interval){for(var n=Object.keys(X.pipeline),i=n.length,a=0;i>a;a++)X.pipeline[n[a]]();X.then=X.now-X.delta%X.interval}}},t.FramePipeline=function(){var e=this;e.pipeline={},e.then=(new Date).getTime(),e.now=void 0,e.raf=void 0,e.delta=void 0,e.interval=1e3/t.fps},t.FramePipeline.prototype={add:function(e,t){this.pipeline[e]=t},remove:function(e){delete this.pipeline[e]},start:function(){t.tick.call(this)()},has:function(e){return e in this.pipeline},pause:function(){t.cancelAnimFrame.call(e,this.raf)},setFPS:function(e){this.interval=1e3/e}},t.pipeline=new t.FramePipeline,t.pipeline.start(),t.TweenController=function(){this.q=[]},t.TweenController.prototype={queue:function(){var e=new t.Tween(this),X=this.q[this.q.length-1];return!X||X&&X.hasCompleted?e.canStart=!0:(e.canStart=!1,X.then(function(){e.canStart=!0,e.start()})),this.q.push(e),e}},t.Tween=function(e){var X=this;X.name="$interpol-"+parseInt(Math.random()*(new Date).getTime()),X.controller=e||new t.TweenController,X.startVal=0,X.endVal=0,X.differences={},X.canStart=!0,X.hasStarted=!1,X.hasCompleted=!1,X.tweenDuration=400,X.delayDuration=0,X.isDelayed=!1,X.repeatCount=0,X.paused=!1,X.easing=t.easing.easeNone,X.onStep=t.noop,X.onComplete=t.noop,X.onStopped=t.noop,X.andThen=t.noop},t.Tween.prototype={from:function(e){return this.startVal=e,this},to:function(e){return this.endVal=e,this},duration:function(e){return this.tweenDuration=e,this},delay:function(e){return this.delayDuration=e,this},repeat:function(e){return this.repeatCount=e,this},ease:function(e){return this.easing=e,this},step:function(e){return this.onStep=e,this},complete:function(e){return this.onComplete=e,this},stopped:function(e){return this.onStopped=e,this},then:function(e){return this.andThen=e,this},reverse:function(){var e=this.startVal,t=this.endVal;this.startVal=t,this.endVal=e,this.start()},start:function(e){var X=this;if(!X.canStart)return X;if(X.delayDuration>0&&!X.isDelayed)return setTimeout(function(){X.start(e)},X.delayDuration),X.isDelayed=!0,X;e&&e.apply(X);var n=1e3/t.fps,i=X.tweenDuration/n;if("object"==typeof X.endVal){"object"!=typeof X.startVal&&(X.startVal={});for(var a in X.endVal)X.startVal.hasOwnProperty(a)||(X.startVal[a]=0),X.differences[a]=X.endVal[a]-X.startVal[a]}else X.differences["$itp-main"]=X.endVal-X.startVal;return X.hasStarted=!0,X.stpFn=function(){if(i>=0&&X.hasStarted){var e=X.tweenDuration;e-=i*n,i--;var a=X.differences.hasOwnProperty("$itp-main")?X.easing.call(t.easing,e,X.startVal,X.differences["$itp-main"],X.tweenDuration):{};if("object"==typeof a)for(var o in X.differences)a[o]=X.easing.call(t.easing,e,X.startVal[o],X.differences[o],X.tweenDuration);X.onStep.call(X,a)}else X.hasStarted?(t.pipeline.remove(X.name),X.hasStarted=!1,X.isDelayed=!1,X.repeatCount>0||-1===X.repeatCount||1/0===X.repeatCount?(X.repeatCount=X.repeatCount<0||1/0===X.repeatCount?X.repeatCount:X.repeatCount--,X.onComplete.call(X,X.endVal),X.start()):(X.hasCompleted=!0,X.onComplete.call(X,X.endVal),X.andThen.call(X),X.controller.q.shift())):(t.pipeline.remove(X.name),X.onStopped.call(X))},t.pipeline.add(X.name,X.stpFn),X},stop:function(){return this.hasStarted=!1,this},pause:function(){return t.pipeline.remove(this.name),this},play:function(){return t.pipeline.has(this.name)?void 0:(t.pipeline.add(this.name,this.stpFn),this)},queue:function(){return this.controller.queue()}};var X=function(e){return t.fps=e,t.pipeline.setFPS(t.fps),X};return X.easing=t.easing,X.tween=function(){return new t.Tween},X.queue=function(){return(new t.TweenController).queue()},X.pipeline=t.pipeline,X}),i("undefined"!=typeof Interpol?Interpol:window.Interpol)}.call(X,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t){(function(X){__browserify_shim_require__=e,function(e,t,X,n,i){var a=function(){var e=Date.now(),t=e,X=0,n=1/0,i=0,a=0,o=1/0,r=0,s=0,c=0,u=document.createElement("div");u.id="stats",u.addEventListener("mousedown",function(e){e.preventDefault(),g(++c%2)},!1),u.style.cssText="width:80px;opacity:0.9;cursor:pointer";var l=document.createElement("div");l.id="fps",l.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",u.appendChild(l);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",l.appendChild(d);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",l.appendChild(f);f.children.length<74;){var h=document.createElement("span");h.style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(h)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",u.appendChild(m);var p=document.createElement("div");p.id="msText",p.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",p.innerHTML="MS",m.appendChild(p);var x=document.createElement("div");for(x.id="msGraph",x.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(x);x.children.length<74;){var h=document.createElement("span");h.style.cssText="width:1px;height:30px;float:left;background-color:#131",x.appendChild(h)}var g=function(e){switch(c=e){case 0:l.style.display="block",m.style.display="none";break;case 1:l.style.display="none",m.style.display="block"}},v=function(e,t){var X=e.appendChild(e.firstChild);X.style.height=t+"px"};return{REVISION:11,domElement:u,setMode:g,begin:function(){e=Date.now()},end:function(){var c=Date.now();return X=c-e,n=Math.min(n,X),i=Math.max(i,X),p.textContent=X+" MS ("+n+"-"+i+")",v(x,Math.min(30,30-X/200*30)),s++,c>t+1e3&&(a=Math.round(1e3*s/(c-t)),o=Math.min(o,a),r=Math.max(r,a),d.textContent=a+" FPS ("+o+"-"+r+")",v(f,Math.min(30,30-a/100*30)),t=c,s=0),c},update:function(){e=this.end()}}};i("undefined"!=typeof a?a:window.Stats)}.call(X,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t){function X(e){for(var t,X,n,i,a,o="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(e),c=s.byteLength,u=c%3,l=c-u,d=0;l>d;d+=3)a=s[d]<<16|s[d+1]<<8|s[d+2],t=(16515072&a)>>18,X=(258048&a)>>12,n=(4032&a)>>6,i=63&a,o+=r[t]+r[X]+r[n]+r[i];return 1==u?(a=s[l],t=(252&a)>>2,X=(3&a)<<4,o+=r[t]+r[X]+"=="):2==u&&(a=s[l]<<8|s[l+1],t=(64512&a)>>10,X=(1008&a)>>4,n=(15&a)<<2,o+=r[t]+r[X]+r[n]+"="),o}var n=function(e,t,n){var i,a=!1,o={uri:function(){return e},source:e};if(!t||!n)return o;var r=/\.(\w+)$/.exec(e)[1];i="data:image/"+r+";base64,"+X(t),o.uri=function(){return i},a=!0,n(o)};t.exports=n},{}],5:[function(e,t){function X(e){return function(t){return e.test(t)}}function n(e){return function(t){return t in r?!1:(r[t]=e(t),!0)}}var i=e("./loader"),a=e("./image"),o=e("./sound"),r={},s=/\.(gif|jpeg|jpg|png)$/,c=/\.(mp3|mp4|ogg)$/,u={};u.load=function(e){var t,u,l=[];"string"==typeof e?l.push(e):l=l.concat(e),t=l.filter(X(c)).filter(n(o)),u=l.filter(X(s)).filter(n(a));var d=new i(u,a),f=new i(t,o);return Promise.all([f.load(),d.load()]).then(function(e){var t=e[0],X=e[1];t.forEach(function(e){r[e.source]=e}),X.forEach(function(e){r[e.source]=e})})},u.get=function(e){return e in r?r[e]:void 0},t.exports=u},{"./image":4,"./loader":6,"./sound":8}],6:[function(e,t){var X=function(e,t){this.files=e,this.transform=t||function(e,t,X){return X(t)}};X.prototype.loadBuffer=function(e){var t=this;return new Promise(function(X,n){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){t.transform(e,i.response,function(e){X(e)})},i.onerror=n,i.send()})},X.prototype.load=function(){var e=this,t=e.files.map(function(t){return e.loadBuffer(t)});return Promise.all(t)},t.exports=X},{}],7:[function(e,t){t.exports=window.AudioContext||window.webAudioContext||window.webkitAudioContext},{}],8:[function(e,t){function X(e,t,X){var n,a=!1,o={play:function(){if(a){var e=i.createBufferSource();e.buffer=n,e.onended=function(){e=null},e.connect(i.destination),e.start(0)}},source:e};return t&&X?void i.decodeAudioData(t,function(e){n=e,a=!0,X(o)}):o}var n=e("./context"),i=new n;t.exports=X},{"./context":7}],9:[function(e,t){var X=e("./utilities"),n="http://playful-discovery.s3-website-eu-west-1.amazonaws.com/",i={};["displayMetrics","useSound","useAccelerometer","useGamification","useDynamicLighting","useBackgroundAnimation","useMessaging","isCeltra"].forEach(function(e){var t=!1;Object.defineProperty(i,e,{enumerable:!0,set:function(n){t=n,X.emitter.emit("global_config_change",e,t)},get:function(){return t}})}),i.displayMetrics=!1,i.useSound=!0,i.useAccelerometer=!0,i.useDynamicLighting=!0,i.defaultLanguage="en",i.defaultEntry="music";var a={castShadow:!0,autoListen:!0,useInertia:!1,useBackgrounds:!0,useContent:!1,useVideo:!1,useGif:!1,cropLargeFaces:!1,isSequential:!1,normaliseFacialRotation:!0},o={displayMetrics:"Display Metrics",useSound:"Sound",useMessaging:"Post Messaging",useGamification:"Gamification",useDynamicLighting:"Dynamic Lighting",useBackgroundAnimation:"Background Animation",useInertia:"Inertial Interaction",useAccelerometer:"Accelerometer",useBackgrounds:"Face Backgrounds",useContent:"Face Content",useVideo:"Video Face Content",useGif:"GIF Face Content",cropLargeFaces:"Crop Full Face Assets",isSequential:"Sequential Interaction",normaliseFacialRotation:"Normalise Face Rotation",isCeltra:"Celtra Platform",castShadow:"Cast Shadow"},r={displayMetrics:"Display fps (frames per second) and frame time (in milliseconds).",useSound:"Have sounds throughout the Ad.",useMessaging:"For interaction with Ad Server APIs as an Iframe.",useGamification:'Puzzle comprised of four cubes, match the sides to "win".',useDynamicLighting:"Dynamically light the cubes with a forward facing light.",useBackgroundAnimation:"Turn on a simple background animation for performance testing.",useInertia:'Allow the user to "flick" the cube and it to gradually halt movement.',useAccelerometer:"Turn on rotation from Accelerometer/Gyro data.",useBackgrounds:"Show backgrounds on the cube faces.",useContent:"Show content on the cube faces.",useVideo:"Show a video on one face of the cube.",useGif:"Show a GIF on one face of the cube.",cropLargeFaces:"Use the full face assets on the gamified cube to reduce ad weight.",isSequential:"Always display the next face of the cube no matter which way it turns.",normaliseFacialRotation:"Always display cube faces at the correct orientation.",isCeltra:"Will be green if we are in Celtra.",castShadow:"Cast a shadow underneath the cube."};t.exports={BASE_URL:n,global:i,cube:a,titles:o,descriptions:r}},{"./utilities":20}],10:[function(e,t){var X=e("../utilities"),n={init:function(e,t,X,n,i){this.id=Math.random().toString(36).substr(5,10),this.width=e,this.height=t,this.index=X,this.name=n,this.target=i,this.rotation={X:0,Y:0,Z:0},this.translate={X:0,Y:0,Z:0},this.element=this.getElement(),this.target.appendChild(this.element)},getElement:function(){return X.getElement("div","common",{},{})},render:function(){this.element.style[X.CSS_TRANSFORM]="rotateX("+this.rotation.X+"deg) rotateY("+this.rotation.Y+"deg) rotateZ("+this.rotation.Z+"deg) translateX("+this.translate.X+"px) translateY("+this.translate.Y+"px) translateZ("+this.translate.Z+"px)"},remove:function(){this.element.parentNode.removeChild(this.element)}};t.exports=n},{"../utilities":20}],11:[function(e,t){var X=(e("../../utilities"),e("../../config")),n=(e("../../messaging"),e("../../assetmanager"),e("../../tracking")),i=(X.global.isCeltra?X.BASE_URL:"",{background:"assets/img/cubes/{language}/{name}/side{i}.jpg",html:function(){return'<a href="{link}" class="btn-buy"></a>'},onload:function(e){e.querySelector("a[href]").addEventListener("tap",function(e){n.trackEvent("cta-clicked",!0),n.goToURL(e.target.href)})},base:"https://ad.doubleclick.net/ddm/clk/{id}",entryId:{en:{apps:"116389570",books:"116389246",movies:"116389710",music:"116389243"},de:{apps:"116428819",books:"116429216",movies:"116428827",music:"116428821"},fr:{apps:"116416012",books:"116415809",movies:"116416015",music:"116415806"},ru:{apps:"XXXXXXXXX",books:"XXXXXXXXX",movies:"XXXXXXXXX",music:"XXXXXXXXX"},es:{apps:"XXXXXXXXX",books:"XXXXXXXXX",movies:"XXXXXXXXX",music:"XXXXXXXXX"},it:{apps:"XXXXXXXXX",books:"XXXXXXXXX",movies:"XXXXXXXXX",music:"XXXXXXXXX"}},music:{en:{apps:{1:"289365522;{e};r",2:"289365520;{e};p",3:"289365518;{e};w",4:"289365517;{e};v",5:"289365515;{e};t"},books:{1:"289364270;{e};q",2:"289364273;{e};t",3:"289364272;{e};s",4:"289364266;{e};v",5:"289364267;{e};w"},movies:{1:"289365523;{e};o",2:"289365521;{e};m",3:"289365519;{e};t",4:"289365533;{e};p",5:"289365531;{e};n"},music:{1:"289364293;{e};s",2:"289364290;{e};p",3:"289364291;{e};q",4:"289364288;{e};w",5:"289364289;{e};x"}},de:{apps:{1:"289418165;{e};t",2:"289418176;{e};v",3:"289418172;{e};r",4:"289418173;{e};s",5:"289418156;{e};t"},books:{1:"289418116;{e};h",2:"289418109;{e};j",3:"289418111;{e};c",4:"289418117;{e};i",5:"289418119;{e};k"},movies:{1:"289418169;{e};w",2:"289418100;{e};h",3:"289418104;{e};l",4:"289418177;{e};v",5:"289418160;{e};n"},music:{1:"289418139;{e};n",2:"289418132;{e};g",3:"289418133;{e};h",4:"289418138;{e};m",5:"289418136;{e};k"}},fr:{apps:{1:"289407398;{e};h",2:"289407701;{e};v",3:"289407700;{e};u",4:"289407705;{e};z",5:"289407703;{e};x"},books:{1:"289407350;{e};i",2:"289407355;{e};n",3:"289407349;{e};q",4:"289407353;{e};l",5:"289407356;{e};o"},movies:{1:"289407714;{e};c",2:"289407702;{e};z",3:"289407716;{e};e",4:"289407706;{e};d",5:"289407704;{e};b"},music:{1:"289407372;{e};j",2:"289407374;{e};l",3:"289407371;{e};i",4:"289407376;{e};n",5:"289407373;{e};k"}},ru:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}},es:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}},it:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}}},movies:{en:{apps:{1:"289365503;{e};q",2:"289365500;{e};n",3:"289365501;{e};o",4:"289364298;{e};a",5:"289364299;{e};b"},books:{1:"289364265;{e};u",2:"289364258;{e};w",3:"289364259;{e};x",4:"289364260;{e};p",5:"289364261;{e};q"},movies:{1:"289365502;{e};l",2:"289365516;{e};q",3:"289365514;{e};o",4:"289365512;{e};m",5:"289365510;{e};k"},music:{1:"289364284;{e};s",2:"289364279;{e};w",3:"289364278;{e};v",4:"289364281;{e};p",5:"289364280;{e};o"}},de:{apps:{1:"289418153;{e};q",2:"289418145;{e};r",3:"289418144;{e};q",4:"289418147;{e};t",5:"289418146;{e};s"},books:{1:"289418105;{e};f",2:"289418175;{e};m",3:"289418179;{e};q",4:"289418167;{e};n",5:"289418171;{e};i"},movies:{1:"289418155;{e};r",2:"289418174;{e};s",3:"289418178;{e};w",4:"289418166;{e};t",5:"289418170;{e};o"},music:{1:"289418129;{e};m",2:"289418126;{e};j",3:"289418127;{e};k",4:"289418124;{e};h",5:"289418125;{e};i"}},fr:{apps:{1:"289407386;{e};e",2:"289407383;{e};b",3:"289407384;{e};c",4:"289407382;{e};a",5:"289407381;{e};z"},books:{1:"289407348;{e};p",2:"289407341;{e};i",3:"289407342;{e};j",4:"289407344;{e};l",5:"289407343;{e};k"},movies:{1:"289407385;{e};g",2:"289407399;{e};l",3:"289407397;{e};j",4:"289407393;{e};f",5:"289407395;{e};h"},music:{1:"289407367;{e};n",2:"289407362;{e};i",3:"289407361;{e};h",4:"289407363;{e};j",5:"289407364;{e};k"}},ru:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}},es:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}},it:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}}},apps:{en:{apps:{1:"289365532;{e};s",2:"289365530;{e};q",3:"289365528;{e};x",4:"289365526;{e};v",5:"289365524;{e};t"},books:{1:"289364275;{e};v",2:"289364274;{e};u",3:"289364277;{e};x",4:"289364276;{e};w",5:"289364271;{e};r"},movies:{1:"289364254;{e};o",2:"289364255;{e};p",3:"289364256;{e};q",4:"289364257;{e};r",5:"289365525;{e};q"},music:{1:"289364296;{e};v",2:"289364297;{e};w",3:"289364294;{e};t",4:"289364295;{e};u",5:"289364292;{e};r"}},de:{apps:{1:"289418106;{e};o",2:"289418102;{e};k",3:"289418114;{e};n",4:"289418110;{e};j",5:"289418148;{e};u"},books:{1:"289418122;{e};e",2:"289418123;{e};f",3:"289418120;{e};c",4:"289418121;{e};d",5:"289418118;{e};j"},movies:{1:"289418158;{e};u",2:"289418162;{e};p",3:"289418150;{e};m",4:"289418154;{e};q",5:"289418152;{e};o"},music:{1:"289418141;{e};g",2:"289418140;{e};f",3:"289418143;{e};i",4:"289418142;{e};h",5:"289418137;{e};l"}},fr:{apps:{1:"289407715;{e};a",2:"289407713;{e};y",3:"289407711;{e};w",4:"289407709;{e};d",5:"289407707;{e};b"},books:{1:"289407358;{e};q",2:"289407357;{e};p",3:"289407360;{e};j",4:"289407359;{e};r",5:"289407354;{e};m"},movies:{1:"289407337;{e};d",2:"289407338;{e};e",3:"289407339;{e};f",4:"289407340;{e};x",5:"289407708;{e};f"},music:{1:"289407379;{e};q",2:"289407380;{e};i",3:"289407377;{e};o",4:"289407378;{e};p",5:"289407375;{e};m"}},ru:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}},es:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}},it:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}}},books:{en:{apps:{1:"289365513;{e};r",2:"289365511;{e};p",3:"289365509;{e};w",4:"289365507;{e};u",5:"289365505;{e};s"},books:{1:"289364268;{e};x",2:"289364269;{e};y",3:"289364262;{e};r",4:"289364263;{e};s",5:"289364264;{e};t"},movies:{1:"289365529;{e};u",2:"289365527;{e};s",3:"289365508;{e};r",4:"289365506;{e};p",5:"289365504;{e};n"},music:{1:"289364286;{e};u",2:"289364287;{e};v",3:"289364283;{e};r",4:"289364282;{e};q",5:"289364285;{e};t"}},de:{apps:{1:"289418164;{e};s",2:"289418168;{e};w",3:"289418157;{e};u",4:"289418161;{e};p",5:"289418149;{e};v"},books:{1:"289418115;{e};g",2:"289418113;{e};e",3:"289418103;{e};d",4:"289418101;{e};b",5:"289418107;{e};h"},movies:{1:"289418112;{e};k",2:"289418108;{e};p",3:"289418159;{e};v",4:"289418163;{e};q",5:"289418151;{e};n"},music:{1:"289418135;{e};j",2:"289418134;{e};i",3:"289418130;{e};e",4:"289418131;{e};f",5:"289418128;{e};l"}},fr:{apps:{1:"289407396;{e};f",2:"289407394;{e};d",3:"289407392;{e};b",4:"289407390;{e};z",5:"289407388;{e};g"},books:{1:"289407351;{e};j",2:"289407352;{e};k",3:"289407345;{e};m",4:"289407346;{e};n",5:"289407347;{e};o"},movies:{1:"289407712;{e};a",2:"289407710;{e};y",3:"289407391;{e};d",4:"289407389;{e};k",5:"289407387;{e};i"},music:{1:"289407369;{e};p",2:"289407370;{e};h",3:"289407366;{e};m",4:"289407365;{e};l",5:"289407368;{e};o"}},ru:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}},es:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}},it:{apps:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},books:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},movies:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"},music:{1:"XXXXXXXXX;{e};x",2:"XXXXXXXXX;{e};x",3:"XXXXXXXXX;{e};x",4:"XXXXXXXXX;{e};x",5:"XXXXXXXXX;{e};x"}}}});t.exports=i},{"../../assetmanager":5,"../../config":9,"../../messaging":18,"../../tracking":19,"../../utilities":20}],12:[function(e,t){var X=e("../utilities"),n=e("./common"),i=e("./content"),a=e("../config"),o=e("../assetmanager"),r=Object.create(n);r.init=function(e,t,X,i,a,o){this.parent=o,this.parentID=o.id,n.init.apply(this,arguments),this.element.setAttribute("parent",this.parentID),this.translate.Z=this.width/2,this.renderedZ=this.rotation.Z
},r.getElement=function(){return this.populateElement(X.getElement("div","side no"+(this.index+1),{index:this.index},{width:this.width+"px",height:this.height+"px"}))},r.populateElement=function(e){var t=a.global.language,n=a.global.entry;if(this.parent.config.useBackgrounds){var r=new Image,s=this.parent.config.cropLargeFaces?"main":this.name,c=a.global.isCeltra?a.BASE_URL+i.background:i.background,u=X.format(c,{i:this.index+1,name:s,language:t});r.src=o.get(u).uri(),r.width=this.width,r.height=this.height,this.parent.config.cropLargeFaces&&(r.width*=2,r.height*=2,r.style.left=X.isOdd(this.parent.index)?-this.width+"px":0,r.style.top=this.parent.index<2?0:-this.height+"px"),e.appendChild(r)}if(this.parent.config.useContent&&0!==this.index){var l=document.createElement("span");l.className="content";var d=i.html(this.parent.config),f=i.base,h=i.entryId[t][n],m=X.format(i[this.parent.name][t][n][this.index],{e:h}),p=X.format(f,{id:m});l.innerHTML=X.format(d,{link:p}),e.appendChild(l),i.onload(e,this.parent.config)}var x=document.createElement("div");return x.className="shadow",x.style.width=this.width+"px",x.style.height=this.height+"px",e.appendChild(x),e},r.changeContent=function(e){var t=a.global.language;if(this.parent.config.useBackgrounds){var n=X("img",this.element)[0],r=a.global.isCeltra?a.BASE_URL+i.background:i.background,s=X.format(r,{i:e+1,name:this.name,language:t});n.src=o.get(s).uri()}if(this.parent.config.useContent){e=e>=i.sides[this.name].length?0:e;var c=i.sides[this.name][e],u=X(".content",this.element)[0];u.innerHTML=c.html(this.parent.config),c.onload(this.element,this.parent.config)}return e},r.render=function(){this.renderedZ=this.rotation.Z,n.render.apply(this)},t.exports=r},{"../assetmanager":5,"../config":9,"../utilities":20,"./common":10,"./content":11}],13:[function(e,t){var X=e("../utilities"),n=e("../tracking"),i=e("./common"),a=e("./matrix"),o=e("./face"),r=e("./shadow"),s=e("../config"),c=e("interpol"),u=e("../assetmanager"),l=e("./vect3"),d=Object.create(i);d.getElement=function(){return X.getElement("div","cube",{index:this.index},{width:this.width+"px",height:this.height+"px"})},d.init=function(e,t,d,f,h,m){function p(e){R.nextFaceIndex=0,R.faces.forEach(function(e){e.remove()});var t;e&&(t=X.clone(R.rotation),R.rotation={X:0,Y:0,Z:0},R.render()),R.faces=[];for(var n=0;6>n;n++){var i=Object.create(o);i.init(R.width,R.height,n,R.name,R.element,R),R.config.isSequential&&i.changeContent(R.currentContent),i.rotation.Y=1===n?180:2===n?90:3===n?-90:0,i.rotation.X=4===n?90:5===n?-90:0,i.render(),R.faces.push(i)}x(),e&&t&&(R.rotation=t,R.render())}function x(){R.faceData=R.faces.map(function(e){return X(".shadow",e.element)[0]}).map(function(e){var t=X.computeVertexData(e);return e.style.opacity=0,{verticies:t,normal:l.normalize(l.cross(l.sub(t.b,t.a),l.sub(t.c,t.a))),center:l.divs(l.sub(t.c,t.a),2),elem:e}})}function g(){R.element.addEventListener("touchstart",w),R.element.addEventListener("touchstart",function e(){X.emitter.emit("first_cube_interaction"),R.element.removeEventListener("touchstart",e)})}function v(){R.faces.forEach(function(e){e.rotation.Z=0,e.render()})}function y(){nt=X.emitter.on(R.id,function(e){nt&&(nt=nt()),w(e)})}function b(){var e=S(R.rotation);["LR","UD"].forEach(function(t){var n=e[t],i=R.rotation[n],a=X.nearest(i,90),o=Math.abs(i-a)/45,r=R.shadow.originalScale+o*R.shadow.hypRatio/2;R.shadow.scale["LR"===t?"X":"Y"]=r}),R.shadow.render()}function w(e){R.element.removeEventListener("touchstart",w);var t=e.changedTouches[0];O=t.clientX,q=t.clientY,z=Date.now(),_=O,N=q,H=W=!1,velocity=U=0,Q?(Q.pause(),$=Q):(J=k(e.target),R.config.isSequential&&(R.currentContent++,R.faces.filter(function(e){return e.index!==J.index}).forEach(function(e){R.currentContent=e.changeContent(R.currentContent)}))),it=X.clone(R.rotation),P=S(it),document.addEventListener("touchmove",C),document.addEventListener("touchend",E)}function C(e){nt&&(nt=nt()),e.preventDefault();var t=e.changedTouches[0];B=t.clientX<_?"left":"right",Y=t.clientY<N?"up":"down",_=t.clientX,N=t.clientY;var n=document.elementFromPoint(_,N),i=M(n);if(i){var a=i.getAttribute("parent");if(a!==R.id){var o=function(){X.emitter.emit(a,X.extend({},e,{target:n}))};return void E(X.extend({},e,{onAnimComplete:o}))}}else if(!R.config.useInertia)return void E(e);var r=(O-_)/(R.width/90),u=(q-N)/(R.height/90),l=Math.abs(r),d=Math.abs(u);Math.max(l,d)<1||(X.isDefined(j)||(V=l>d?"leftright":"updown",j="leftright"===V?P.LR:P.UD,F(J,V)),G=Z,Z="leftright"===V?B:Y,G!==Z&&(W=!0,K=Date.now(),et=_,tt=N),Xt=Date.now(),H=!0,U="leftright"===V?r:u,U=I(U),c.pipeline.has("render"+R.id)||c.pipeline.add("render"+R.id,function(){var e=R.rotation[j],t=Math.round(it[j]+U),n=X.nearest(t,90),i=X.nearest(e,90);n!==i&&s.global.useSound&&R.sound.play(),R.rotation[j]=t,R.render()}))}function E(e){if(document.removeEventListener("touchmove",C),document.removeEventListener("touchend",E),R.config.isSequential&&H||(R.element.addEventListener("touchstart",w),y()),!H)return void($&&($.play(),$=void 0));n.trackEvent("cube-interaction-rotate-"+Z,!0),c.pipeline.has("render"+R.id)&&c.pipeline.remove("render"+R.id);var t=e.changedTouches[0],i=Date.now(),a=t.clientX,o=t.clientY,r=a-et,u=o-tt,l="leftright"===V?r:u,d=i-K;l=0>l&&("right"===Z||"down"===Z)?Math.abs(l):l,l=l>0&&("left"===Z||"up"===Z)?-l:l;var f=l/d,h=Math.abs(l)<.8*R.width/2?1:0,m=it[j],p=R.rotation[j],x=X.nearest(p,90),g=1;if(R.config.useInertia&&Math.abs(f)>.8){var v=0>f?"min":"max",b=0>f?-h:h,k=Math.round(2*f);x-=I(90*Math[v](b,k)),g=Math.abs(x-p)/90}else{var M=X.nearest(m,90);x="up"===Z||"left"===Z?M+I(90):M-I(90)}var S,F=p,T=x,D="onAnimComplete"in e?100:300,O=!1;Q=c.tween().from(F).to(T).duration(Math.round(D*g)).ease(c.easing.easeOutCirc).step(function(t){S=S||t;var n=X.nearest(t,90),i=X.nearest(S,90);if(n!==i&&s.global.useSound&&R.sound.play(),R.rotation[j]=t,R.render(),S=t,"onAnimComplete"in e){var a=Math.abs(T-t);10>=a&&!O&&(O=!0,e.onAnimComplete())}}).complete(function(e){var t=X.norm(X.nearest(e,90)%360);R.rotation[j]=t,R.render(),A(),R.config.isSequential&&(R.element.addEventListener("touchstart",w),y()),j=void 0,Z=void 0,Q=void 0,L(R.rotation)}).start()}function k(e){var t=M(e);return X.isDefined(t)?R.faces[parseInt(t.getAttribute("index"),10)]:void 0}function M(e){for(var t=e;null!==t&&!/side/.test(t.className);)t=t.parentNode;return null!==t&&X.isDefined(t)?t:void 0}function S(e){var t=X.norm(X.nearest(e.X,90)%360),n=X.norm(X.nearest(e.Y,90)%360),i=90===t||270===t?"Z":"Y",a=90===n||270===n?"Z":"X",o=["X","Y","Z"].filter(function(e){return e!==i&&e!==a})[0];return{LR:i,UD:a,Mid:o}}function L(e,t){if(R.config.normaliseFacialRotation||"undefined"!=typeof t){var n=X.norm(X.nearest(e.X,90)%360),i=X.norm(X.nearest(e.Y,90)%360),o=X.norm(X.nearest(e.Z,90)%360);if("undefined"!=typeof t&&t!==!0)return a[t][n][i][o];for(var r=R.faces.length-1;r>=0;r--){var s=R.faces[r];s.rotation.Z=a[r][n][i][o],s.render()}}}function F(e,t){if(R.config.normaliseFacialRotation&&"updown"===t){var n=X.isEven(e.index)?e.index+1:e.index-1,i=R.faces[n];i.rotation.Z=i.renderedZ+180,i.render()}}function I(e){var t=X.norm(X.nearest(R.rotation.X,90)%360),n=X.norm(X.nearest(R.rotation.Y,90)%360);return"leftright"===V?180===t&&"Y"===j||90===t&&0===n||270===t&&("Z"!==j||180===n)?e:-e:270===n?-e:e}function A(){s.global.useGamification&&R.config.matchSides!==!1&&X.emitter.emit("rotation_complete")}function T(e){var t=document.elementFromPoint(X.windowWidth()/2,X.windowHeight()/2),n=k(t);R.name=e,R.faces.map(function(t){return t.name=e,t}).filter(function(e){return e.index!==n.index}).forEach(function(e){R.currentContent=e.changeContent(0)}),L(R.rotation);var i,a=S(R.rotation),o=X.range(0,100)<50?a.UD:a.LR,r=X.range(0,100)<50?90:-90;c.tween().from(0).to(r).ease(c.easing.easeOutCirc).step(function(e){R.rotation[o]=i+e,R.render()}).complete(function(){R.faces.forEach(function(e,t){e.changeContent(t)}),R.rotation.X=R.rotation.Y=R.rotation.Z=0,R.render(),x(),L(R.rotation)}).start(function(){i=R.rotation[o]})}i.init.apply(this,arguments),this.config=X.extend({},s.cube,m);var D="assets/sound/click.mp3";D=s.global.isCeltra?s.BASE_URL+D:D,this.sound=u.get(D),this.currentContent=0,this.nextFaceIndex=0,this.faces=[],this.faceData=[],this.shadow=Object.create(r),this.shadow.init(.8*this.width,.8*this.height,this.index,this.name,this.target.parentNode,this),this.shadow.opacity=this.config.castShadow?this.shadow.opacity:0,this.shadow.render(),this.light=X('[role="light"]')[0],this.lightTransform=X.getTransform(this.light);var R=this;p(),this.target.style[X.CSS_TRANSFORM]="translateZ(-"+this.width/2+"px)",this.config.autoListen&&g(),this.getFaceFromTarget=k,this.getNormalisedFaceRotation=L,this.rerenderFaces=p.bind(this,!0),this.resetNormalisedFaces=v,this.getAxisDefinition=S,this.changeCubeNameChangeInvisibleFacesAndRotate=T,this.forceRotationOfOppositeForFirstFace=F.bind(this,this.faces[0],"updown"),this.renderShadow=b,this.addInteractionListener=g;var O,q,z,_,N,P,j,V,B,Y,Z,G,U,H,W,Q,$,J,K,et,tt,Xt,nt,it=X.clone(this.rotation);document.addEventListener("touchstart",y),document.addEventListener("touchend",function(){nt&&nt()})},d.render=function(){if(i.render.call(this),this.config.castShadow&&this.renderShadow(),!s.global.useDynamicLighting)return void this.faceData.forEach(function(e){e.elem.style.opacity=0});for(var e,t,n,a=0,o=this.faceData.length,r=X.getTransform(this.element),c=l.rotate(this.lightTransform.translate,l.muls(r.rotate,-1));++a<o;)e=this.faceData[this.nextFaceIndex],t=l.normalize(l.sub(c,e.center)),n=1-Math.max(0,l.dot(e.normal,t)).toFixed(3),e.light!=n&&(e.light=n,e.elem.style.opacity=n),this.nextFaceIndex=(this.nextFaceIndex+1)%o},t.exports=d},{"../assetmanager":5,"../config":9,"../tracking":19,"../utilities":20,"./common":10,"./face":12,"./matrix":14,"./shadow":15,"./vect3":16,interpol:2}],14:[function(e,t){t.exports={0:{0:{0:{0:0,90:270,180:180,270:90},90:{0:0,90:270,180:180,270:90},180:{0:0,90:270,180:180,270:90},270:{0:0,90:270,180:180,270:90}},90:{0:{0:0,90:270,180:180,270:90},90:{0:270,90:180,180:90,270:0},180:{0:180,90:90,180:0,270:270},270:{0:90,90:0,180:270,270:180}},180:{0:{0:180,90:90,180:0,270:270},90:{0:180,90:90,180:0,270:270},180:{0:180,90:90,180:0,270:270},270:{0:180,90:90,180:0,270:270}},270:{0:{0:0,90:270,180:180,270:90},90:{0:90,90:0,180:270,270:180},180:{0:180,90:90,180:0,270:270},270:{0:270,90:180,180:90,270:0}}},1:{0:{0:{0:0,90:90,180:180,270:270},90:{0:0,90:90,180:180,270:270},180:{0:0,90:90,180:180,270:270},270:{0:0,90:90,180:180,270:270}},90:{0:{0:180,90:270,180:0,270:90},90:{0:90,90:180,180:270,270:0},180:{0:0,90:90,180:180,270:270},270:{0:270,90:0,180:90,270:180}},180:{0:{0:180,90:270,180:0,270:90},90:{0:180,90:270,180:0,270:90},180:{0:180,90:270,180:0,270:90},270:{0:180,90:270,180:0,270:90}},270:{0:{0:180,90:270,180:0,270:90},90:{0:270,90:0,180:90,270:180},180:{0:0,90:90,180:180,270:270},270:{0:90,90:180,180:270,270:0}}},2:{0:{0:{0:0,90:270,180:180,270:90},90:{0:0,90:180,180:180,270:180},180:{0:0,90:90,180:180,270:270},270:{0:0,90:0,180:180,270:0}},90:{0:{0:270,90:270,180:270,270:270},90:{0:180,90:180,180:180,270:0},180:{0:90,90:90,180:90,270:90},270:{0:0,90:0,180:0,270:180}},180:{0:{0:180,90:270,180:0,270:90},90:{0:180,90:180,180:0,270:180},180:{0:180,90:90,180:0,270:270},270:{0:180,90:0,180:0,270:0}},270:{0:{0:90,90:90,180:90,270:90},90:{0:180,90:0,180:180,270:180},180:{0:270,90:270,180:270,270:270},270:{0:0,90:180,180:0,270:0}}},3:{0:{0:{0:0,90:270,180:180,270:90},90:{0:0,90:0,180:180,270:0},180:{0:0,90:90,180:180,270:270},270:{0:0,90:180,180:180,270:180}},90:{0:{0:90,90:90,180:90,270:90},90:{0:0,90:180,180:0,270:0},180:{0:270,90:270,180:270,270:270},270:{0:180,90:0,180:180,270:180}},180:{0:{0:180,90:270,180:0,270:90},90:{0:180,90:0,180:0,270:0},180:{0:180,90:90,180:0,270:270},270:{0:180,90:180,180:0,270:180}},270:{0:{0:270,90:270,180:270,270:270},90:{0:0,90:0,180:0,270:180},180:{0:90,90:90,180:90,270:90},270:{0:180,90:180,180:180,270:0}}},4:{0:{0:{0:0,90:270,180:180,270:90},90:{0:90,90:270,180:90,270:90},180:{0:180,90:270,180:0,270:90},270:{0:270,90:270,180:270,270:90}},90:{0:{0:180,90:180,180:180,270:180},90:{0:270,90:90,180:90,270:90},180:{0:0,90:0,180:0,270:0},270:{0:90,90:270,180:270,270:270}},180:{0:{0:0,90:90,180:180,270:270},90:{0:90,90:90,180:90,270:270},180:{0:180,90:90,180:0,270:270},270:{0:270,90:90,180:270,270:270}},270:{0:{0:0,90:0,180:0,270:0},90:{0:90,90:90,180:270,270:90},180:{0:180,90:180,180:180,270:180},270:{0:270,90:270,180:90,270:270}}},5:{0:{0:{0:0,90:270,180:180,270:90},90:{0:270,90:270,180:270,270:90},180:{0:180,90:270,180:0,270:90},270:{0:90,90:270,180:90,270:90}},90:{0:{0:0,90:0,180:0,270:0},90:{0:270,90:270,180:90,270:270},180:{0:180,90:180,180:180,270:180},270:{0:90,90:90,180:270,270:90}},180:{0:{0:0,90:90,180:180,270:270},90:{0:270,90:90,180:270,270:270},180:{0:180,90:90,180:0,270:270},270:{0:90,90:90,180:90,270:270}},270:{0:{0:180,90:180,180:180,270:180},90:{0:90,90:270,180:270,270:270},180:{0:0,90:0,180:0,270:0},270:{0:270,90:90,180:90,270:90}}}}},{}],15:[function(e,t){var X=e("../utilities"),n=e("./common"),i=(e("../config"),Object.create(n));i.init=function(e,t,X,i,a,o){this.originalScale=2,this.parent=o,this.scale={X:this.originalScale,Y:this.originalScale},this.opacity=.5,n.init.apply(this,arguments),this.translate.Z=-(.8*this.height),this.hypotenuse=Math.sqrt(this.width*this.width+this.height*this.height),this.hypRatio=this.hypotenuse/this.width-1},i.getElement=function(){var e=1.5,t="25px";return X.getElement("div","cube-shadow",{},{width:this.width/e+"px",height:this.height/e+"px",borderRadius:t})},i.render=function(){n.render.apply(this),this.element.style[X.CSS_TRANSFORM]+=" scale("+this.scale.X+","+this.scale.Y+")",this.element.style.opacity=this.opacity},t.exports=i},{"../config":9,"../utilities":20,"./common":10}],16:[function(e,t){var X={create:function(e,t,X){return{x:e||0,y:t||0,z:X||0}},add:function(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}},sub:function(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}},mul:function(e,t){return{x:e.x*t.x,y:e.y*t.y,z:e.z*t.z}},div:function(e,t){return{x:e.x/t.x,y:e.y/t.y,z:e.z/t.z}},muls:function(e,t){return{x:e.x*t,y:e.y*t,z:e.z*t}},divs:function(e,t){return{x:e.x/t,y:e.y/t,z:e.z/t}},len:function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)},dot:function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},cross:function(e,t){return{x:e.y*t.z-e.z*t.y,y:e.z*t.x-e.x*t.z,z:e.x*t.y-e.y*t.x}},normalize:function(e){return X.divs(e,X.len(e))},ang:function(e,t){return Math.acos(X.dot(e,t)/(X.len(e)*X.len(t)))},copy:function(e){return{x:e.x,y:e.y,z:e.z}},equal:function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},rotate:function(e,t){var X=e.x,n=e.y,i=e.z,a=t.x/2,o=t.y/2,r=t.z/2,s=Math.cos(a),c=Math.cos(o),u=Math.cos(r),l=Math.sin(a),d=Math.sin(o),f=Math.sin(r),h=s*c*u+-l*d*f,m=l*c*u- -s*d*f,p=s*d*u+l*c*-f,x=s*c*f- -l*d*u,g=1-2*(p*p+x*x),v=2*(m*p+x*h),y=2*(m*x-p*h),b=2*(m*p-x*h),w=1-2*(m*m+x*x),C=2*(x*p+m*h),E=2*(m*x+p*h),k=2*(p*x-m*h),M=1-2*(m*m+p*p);return{x:X*g+n*b+i*E,y:X*v+n*w+i*k,z:X*y+n*C+i*M}}};t.exports=X},{}],17:[function(e,t){function X(){n();var e=o('[role="debug"]')[0],t=document.createElement("div");t.className="close",t.addEventListener("tap",function(){e.classList.add("hidden"),document.addEventListener("touchmove",o.prevent),o.emitter.emit("debug_panel",!1)});var X=document.createElement("div");X.className="open",X.innerHTML="<span></span>",X.addEventListener("tap",function(){e.classList.remove("hidden"),document.removeEventListener("touchmove",o.prevent),o.emitter.emit("debug_panel",!0)});var i=document.createElement("div");i.className="main",e.appendChild(t),e.appendChild(X),e.appendChild(i);var s=document.createElement("h1");s.innerText="Cube Properties",i.appendChild(s),a=document.createElement("ul"),i.appendChild(a);var c=document.createElement("h1");c.innerText="Global Properties",i.appendChild(c);var u=document.createElement("ul");Object.keys(r.global).forEach(function(e){var t=document.createElement("li"),X=document.createElement("input");X.type="checkbox",X.id=e,r.global[e]&&X.setAttribute("checked",!0),X.addEventListener("change",function(t){r.global[e]=t.target.checked});var n=document.createElement("label");n.setAttribute("for",e),n.innerHTML="<h1>"+r.titles[e]+"</h1><p>"+r.descriptions[e]+"</p>",t.appendChild(X),t.appendChild(n),u.appendChild(t)}),i.appendChild(u),o.emitter.on("global_config_change",function(e,t){var X=o("input#"+e,i)[0];X.checked=t?!0:!1})}function n(){function e(){X.update(),n.update()}var t=o('[role="metrics"]')[0],X=new s;X.domElement.style.position="absolute",X.domElement.style.right="0px",X.domElement.style.bottom="0px";var n=new s;n.setMode(1),n.domElement.style.position="absolute",n.domElement.style.right="80px",n.domElement.style.bottom="0px",t.appendChild(X.domElement),t.appendChild(n.domElement),X.domElement.style.display=r.global.displayMetrics?"block":"none",n.domElement.style.display=r.global.displayMetrics?"block":"none",r.global.displayMetrics&&c.pipeline.add("stats",e),o.emitter.on("global_config_change",function(t,i){"displayMetrics"===t&&(X.domElement.style.display=i?"block":"none",n.domElement.style.display=i?"block":"none",c.pipeline[i?"add":"remove"]("stats",e))})}function i(e){if(a){a.innerHTML="";var t=e.map(function(e){return e.config});Object.keys(t[0]).forEach(function(X){var n=document.createElement("li"),i=document.createElement("input");i.type="checkbox",i.id=X,t[0][X]&&i.setAttribute("checked",!0),i.addEventListener("change",function(n){var i=n.target.checked;switch(t.forEach(function(e){"useVideo"!==X&&"useGif"!==X||!i||(e.useContent=!0,o("input#useContent",a)[0].checked=!0),"useContent"!==X||i||(e.useVideo=e.useGif=!1,o("input#useVideo",a)[0].checked=!1,o("input#useGif",a)[0].checked=!1),"isSequential"===X&&i&&(e.useInertia=!1,o("input#useInertia",a)[0].checked=!1),e[X]=i}),X){case"normaliseFacialRotation":case"useBackgrounds":case"useContent":case"useVideo":case"useGif":case"isSequential":e.forEach(function(e){e.rerenderFaces(),e.getNormalisedFaceRotation(e.rotation,!0)}),"normaliseFacialRotation"!==X||i||e.forEach(function(e){e.resetNormalisedFaces()})}});var s=document.createElement("label");s.setAttribute("for",X),s.innerHTML="<h1>"+r.titles[X]+"</h1><p>"+r.descriptions[X]+"</p>",n.appendChild(i),n.appendChild(s),a.appendChild(n)})}}var a,o=e("../utilities"),r=e("../config"),s=e("stats"),c=e("interpol");t.exports={init:X,defineCubeProperties:i}},{"../config":9,"../utilities":20,interpol:2,stats:3}],18:[function(e,t){var X,n;window.addEventListener("message",function(e){if(console.log(e),/\.celtra/.test(e.origin))switch(X&&n||(X=e.source,n=e.origin),e.data){case"init":X.postMessage("received_init",n)}});var i={post:function(e){X&&n&&X.postMessage(e,n)}};t.exports=i},{}],19:[function(e,t){var X,n,i,a=e("./utilities"),o=e("./config"),r="cta-exit-lang:{language}-start:{entry}-url:{href}",s={init:function(e,t,a){X=t,n=a,i=e},trackEvent:function(e,t){return o.global.isCeltra?(t&&i.trackUserInteraction(),void X.trackCustomEventAction(i,{name:e},function(){})):void console.log("Tracking :: "+e)},goToURL:function(e){return this.trackEvent(a.format(r,a.extend({href:e},o.global))),o.global.isCeltra?void n.goToURLAction(i,{url:e,reportLabel:e},function(){}):void console.log("Go To URL :: "+e)}};t.exports=s},{"./config":9,"./utilities":20}],20:[function(e,t){function X(e){var t=document.createElement("div"),X=null;return e.forEach(function(e){"undefined"!=typeof t.style[e]&&(X=e)}),X}function n(e){var t=e.charAt(0).toUpperCase()+e.substring(1),n=" ms Moz Webkit O".split(" ").map(function(X){return""===X?e:X+t});return X(n)}function i(e,t){return Array.prototype.slice.call((t||c).querySelectorAll(e))}function a(e){var t,X=e.split(/\s*[(),]\s*/).slice(1,-1);return t=6===X.length?{m11:+X[0],m21:+X[2],m31:0,m41:+X[4],m12:+X[1],m22:+X[3],m32:0,m42:+X[5],m13:0,m23:0,m33:1,m43:0,m14:0,m24:0,m34:0,m44:1}:16===X.length?{m11:+X[0],m21:+X[4],m31:+X[8],m41:+X[12],m12:+X[1],m22:+X[5],m32:+X[9],m42:+X[13],m13:+X[2],m23:+X[6],m33:+X[10],m43:+X[14],m14:+X[3],m24:+X[7],m34:+X[11],m44:+X[15]}:{m11:1,m21:0,m31:0,m41:0,m12:0,m22:1,m32:0,m42:0,m13:0,m23:0,m33:1,m43:0,m14:0,m24:0,m34:0,m44:1}}function o(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}}function r(e,t){var X=e.x,n=e.y,i=e.z,a=t.x/2,o=t.y/2,r=t.z/2,s=Math.cos(a),c=Math.cos(o),u=Math.cos(r),l=Math.sin(a),d=Math.sin(o),f=Math.sin(r),h=s*c*u+-l*d*-f,m=l*c*u- -s*d*-f,p=s*d*u+l*c*f,x=s*c*f- -l*d*-u,g=1-2*(p*p+x*x),v=2*(m*p+x*h),y=2*(m*x-p*h),b=2*(m*p-x*h),w=1-2*(m*m+x*x),C=2*(x*p+m*h),E=2*(m*x+p*h),k=2*(p*x-m*h),M=1-2*(m*m+p*p);return{x:X*g+n*b+i*E,y:X*v+n*w+i*k,z:X*y+n*C+i*M}}var s=window,c=document;i.ready=function(e){return"complete"===c.readyState?setTimeout(e,1):void s.addEventListener("DOMContentLoaded",e)},i.extend=function(){for(var e=[].slice.call(arguments),t=e[0],X=1,n=e.length;n>X;X++){var i=e[X];for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])}return t},i.clone=function(e){return i.extend({},e)},i.norm=function(e){return e>=0?e:360-Math.abs(e)},i.deg2rad=function(e){return.017453292519943295*e},i.rad2deg=function(e){return 57.29577951308232*e},i.prevent=function(e){e.preventDefault()},i.format=function(e,t){return e.toString().replace(/\{([^}]+)\}/g,function(e,X){return t[X]})},i.range=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},i.floatRange=function(e,t){return Math.random()*(t-e)+e},i.nearest=function(e,t){return Math.round(e/t)*t},i.isEven=function(e){return e%2===0},i.isOdd=function(e){return e%2!==0},i.isDefined=function(e){return void 0!==e},i.getElement=function(e,t,X,n){var i=c.createElement(e);return i.className=t,Object.keys(X).forEach(function(e){i.setAttribute(e,X[e])}),Object.keys(n).forEach(function(e){i.style[e]=n[e]}),i},i.getRandomRotation=function(e){return e=e||[0,90,180,270],e[i.range(0,e.length-1)]},i.emitter=function(){function e(){var e=[].slice.call(arguments),t=e[0],n=e[1],a=e[2]||i;X[t]=X[t]||[],X[t].push({fn:n,scope:a});var o=X[t].length-1;return function(){X[t].splice(o,1)}}function t(){var e=[].slice.call(arguments),t=e[0],n=e.slice(1);t in X&&X[t].forEach(function(e){e.fn.apply(e.scope,n)})}var X={};return{on:e,emit:t}}(),i.windowWidth=function(){if("undefined"!=typeof s.innerWidth)return function(){return s.innerWidth};var e="clientWidth"in c.documentElement?c.documentElement:c.body;return function(){return e.clientWidth}}(),i.windowHeight=function(){if("undefined"!=typeof s.innerHeight)return function(){return s.innerHeight};var e="clientHeight"in c.documentElement?c.documentElement:c.body;return function(){return e.clientHeight}}(),i.CSS_TRANSFORM=n("transform"),i.CSS_TRANSFORM_ORIGIN=n("transformOrigin"),i.CSS_PERSPECTIVE=n("perspective"),i.computeVertexData=function(e){for(var t,X=e.offsetWidth,n=e.offsetHeight,a={a:{x:-X/2,y:-n/2,z:0},b:{x:X/2,y:-n/2,z:0},c:{x:X/2,y:n/2,z:0},d:{x:-X/2,y:n/2,z:0}};1===e.nodeType;)t=i.getTransform(e),a.a=o(r(a.a,t.rotate),t.translate),a.b=o(r(a.b,t.rotate),t.translate),a.c=o(r(a.c,t.rotate),t.translate),a.d=o(r(a.d,t.rotate),t.translate),e=e.parentNode;return a},i.getTransform=function(e){var t,X,n=getComputedStyle(e,null)[i.CSS_TRANSFORM],o=a(n),r=Math.asin(-o.m13);return t=Math.atan2(o.m23,o.m33),X=Math.atan2(o.m12,o.m11),{transformStyle:n,matrix:o,rotate:{x:t,y:r,z:X},translate:{x:o.m41,y:o.m42,z:o.m43}}},function(){if(c.addEventListener){var e,t,X=function(e,t){var X=c.createEvent("CustomEvent");return X.initCustomEvent(t,!0,!0,e.target),e.target.dispatchEvent(X)||X.preventDefault(),X=null,!1},n=!0,i={x:0,y:0},a={x:0,y:0},o={touchstart:function(e){i.x=e.touches[0].pageX,i.y=e.touches[0].pageY},touchmove:function(e){n=!1,a.x=e.touches[0].pageX,a.y=e.touches[0].pageY},touchend:function(o){if(n){if(X(o,"fastclick"),X(o,"tap"),o.target===e){var r=Date.now()-t;500>r&&X(o,"doubletap")}e=o.target,t=Date.now()}else{var s=a.x-i.x,c=Math.abs(s),u=a.y-i.y,l=Math.abs(u);Math.max(c,l)>20&&(X(o,c>l?0>s?"swipeleft":"swiperight":0>u?"swipeup":"swipedown"),n=!0)}},touchcancel:function(){n=!1}};for(var r in o)c.addEventListener(r,o[r])}}(),t.exports=i},{}]},{},[1]);