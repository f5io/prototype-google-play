!function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t){var e=t("./modules/utilites"),n=t("./modules/config"),i=t("./modules/cube"),o=t("./modules/orient"),r=t("./modules/sound"),a=t("./modules/messaging"),s=t("stats"),u=t("interpol");e.ready(function(){function t(t){X=!1;var n=t.changedTouches[0];b=n.clientX,y=n.clientY,x=b,M=y,B=!1,V?V.stop():_=p.getSideFromTarget(n.target),F=e.extend({},p.rotation),console.log(F);var i=f();C=i.LR,L=i.UD,S=["X","Y","Z"].filter(function(t){return t!==C&&t!==L})[0],velocity=amplitude=0,A=q=0,timestamp=Date.now(),document.addEventListener("touchmove",c),document.addEventListener("touchend",l)}function c(t){t.preventDefault(),n.useAccelerometer&&o.detach(),X=!0;var i=t.changedTouches[0];T=i.clientX<x?"left":"right",O=i.clientY<M?"up":"down",x=i.clientX,M=i.clientY;var r=(b-x)/(p.width/90),a=(y-M)/(p.height/90),s=Math.abs(r),c=Math.abs(a);Math.max(s,c)<1||(e.isDefined(E)||(k=s>c?"leftright":"updown",E="leftright"===k?C:L,n.normaliseFacialRotation&&p.normalizeOppositeSide(_,k)),D=I,I="leftright"===k?T:O,D!==I&&(B=!0,R=Date.now(),Z=x,P=M),A="leftright"===k?r:a,A=d(A),u.pipeline.has("render")||u.pipeline.add("render",function(){var t=p.rotation[E],i=Math.round(F[E]+A),o=e.nearest(i,90),r=e.nearest(t,90);o!==r&&n.useSound&&m.play(),p.rotation[E]=i,p.render()}))}function l(t){if(document.removeEventListener("touchmove",c),document.removeEventListener("touchend",l),X){u.pipeline.has("render")&&u.pipeline.remove("render");var i=t.changedTouches[0],r=Date.now(),a=i.clientX,s=i.clientY,f=a-Z,v=s-P,g="leftright"===k?f:v,w=r-R;g=0>g&&("right"===I||"down"===I)?Math.abs(g):g,g=g>0&&("left"===I||"up"===I)?-g:g;var b=g/w,y=Math.abs(g)<.8*p.width/2?1:0,x=F[E],M=p.rotation[E],C=e.nearest(M,90),L=1;n.useInertia?(C-=d(90*Math[0>b?"min":"max"](0>b?-y:y,Math.round(2*b))),L=Math.abs(C-M)/90):C="updown"===k?"up"===O?x+d(90):x-d(90):"left"===T?x+d(90):x-d(90);var S={rot:M},D={rot:C},A=["X","Y","Z"].filter(function(t){return t!==E});A.forEach(function(t){S["fix"+t]=p.rotation[t],D["fix"+t]=e.nearest(p.rotation[t],90)});var q;V=u.tween().from(S).to(D).duration(Math.round(300*L)).ease(u.easing.easeOutCirc).step(function(t){q=q||t.rot;var i=e.nearest(t.rot,90),o=e.nearest(q,90);i!==o&&n.useSound&&m.play(),p.rotation[E]=t.rot,A.forEach(function(e){p.rotation[e]=t["fix"+e]}),p.render(),q=t.rot}).complete(function(t){p.rotation[E]=h(t.rot%360),A.forEach(function(e){p.rotation[e]=h(t["fix"+e]%360)}),p.render(),V=void 0,E=void 0,n.normaliseFacialRotation&&p.normalizeFace(),n.useAccelerometer&&o.reset(o.listen)}).start()}}function d(t){var n=p.rotation,i=Math.abs(e.nearest(n.X,90)),o=Math.abs(e.nearest(n.Y,90));return"leftright"===k?180===i&&"Y"===E||90===i&&0===o||270===i&&("Z"!==E||180===o)?t:-t:270===o?-t:t}function f(){var t=p.rotation,n=Math.abs(e.nearest(t.X,90)),i=Math.abs(e.nearest(t.Y,90));return{LR:90===n||270===n?"Z":"Y",UD:90===i||270===i?"Z":"X"}}function h(t){return t>=0?t:360-Math.abs(t)}var p=new i(125,125);o(p,d,f),n.useAccelerometer&&o.listen();var m=new r("assets/sound/click.mp3");e("button").forEach(function(t){t.addEventListener("click",function(){n.useMessaging&&a.post("button_interaction")})});var v=e(".checkboxes")[0];e(".checkboxes a").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),v.classList.toggle("open"),p.element.classList.toggle("disabled"),t.innerText="Open Controls"===t.innerText?"Close Controls":"Open Controls"})}),e('input[type="checkbox"]').forEach(function(e){e.checked=n[e.name],e.addEventListener("change",function(){switch(n[e.name]=e.checked,e.name){case"useBackgrounds":case"useContent":case"useVideo":case"useGif":case"normaliseFacialRotation":p.remove(),p=new i,p.element.addEventListener("touchstart",t),p.element.classList.add("disabled"),p.render(),o(p,d,f)}})});var g=new s;g.domElement.style.position="absolute",g.domElement.style.right="0px",g.domElement.style.top="0px";var w=new s;w.setMode(1),w.domElement.style.position="absolute",w.domElement.style.right="80px",w.domElement.style.top="0px",document.body.appendChild(g.domElement),document.body.appendChild(w.domElement),u.pipeline.add("stats",function(){g.update(),w.update()});var b,y,x,M,E,C,L,S,k,T,O,I,D,F,A,q,V,_,R,Z,P,X=!1,B=!1;document.addEventListener("touchmove",e.prevent),p.element.addEventListener("touchstart",t),p.render()})},{"./modules/config":4,"./modules/cube":6,"./modules/messaging":9,"./modules/orient":10,"./modules/sound":14,"./modules/utilites":15,interpol:2,stats:3}],2:[function(t,e){(function(n){__browserify_shim_require__=t,function(t,e,n,i,o){!function(e){"undefined"!=typeof t&&t.exports?t.exports=e(window):self.Interpol=self.iN=e(window)}(function(t){"use strict";var e={};e.fps=60,e.easing={easeNone:function(t,e,n,i){return n*t/i+e},easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0==t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t==i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e},easeInOutExpo:function(t,e,n,i){return 0==t?e:t==i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,i){var o=1.70158,r=0,a=n;if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-o)*Math.PI/r))+e},easeOutElastic:function(t,e,n,i){var o=1.70158,r=0,a=n;if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*t)*Math.sin(2*(t*i-o)*Math.PI/r)+n+e},easeInOutElastic:function(t,e,n,i){var o=1.70158,r=0,a=n;if(0==t)return e;if(2==(t/=i/2))return e+n;if(r||(r=.3*i*1.5),a<Math.abs(n)){a=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/a);return 1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-o)*Math.PI/r)+e:a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-o)*Math.PI/r)*.5+n+e},easeInBack:function(t,e,n,i,o){return void 0==o&&(o=1.70158),n*(t/=i)*t*((o+1)*t-o)+e},easeOutBack:function(t,e,n,i,o){return void 0==o&&(o=1.70158),n*((t=t/i-1)*t*((o+1)*t+o)+1)+e},easeInOutBack:function(t,e,n,i,o){return void 0==o&&(o=1.70158),(t/=i/2)<1?n/2*t*t*(((o*=1.525)+1)*t-o)+e:n/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+e},easeInBounce:function(t,e,n,i){return n-this.easeOutBounce(i-t,0,n,i)+e},easeOutBounce:function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,i){return i/2>t?.5*this.easeInBounce(2*t,0,n,i)+e:.5*this.easeOutBounce(2*t-i,0,n,i)+.5*n+e}},e.rafLast=0,e.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e.rafLast)),o=window.setTimeout(function(){t(n+i)},i);return e.rafLast=n+i,o}}(),e.cancelAnimFrame=function(){return t.cancelAnimationFrame||t.cancelRequestAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelAnimationFrame||t.mozCancelRequestAnimationFrame||function(t){clearTimeout(t)}}(),e.noop=function(){},e.tick=function(){var n=this;return function(){if(n.raf=e.requestAnimFrame.call(t,e.tick.call(n)),n.now=(new Date).getTime(),n.delta=n.now-n.then,n.delta>n.interval){for(var i in n.pipeline)n.pipeline[i]();n.then=n.now-n.delta%n.interval}}},e.FramePipeline=function(){var t=this;t.pipeline={},t.then=(new Date).getTime(),t.now=void 0,t.raf=void 0,t.delta=void 0,t.interval=1e3/e.fps},e.FramePipeline.prototype={add:function(t,e){this.pipeline[t]=e},remove:function(t){delete this.pipeline[t]},start:function(){e.tick.call(this)()},has:function(t){return t in this.pipeline},pause:function(){e.cancelAnimFrame.call(t,this.raf)},setFPS:function(t){this.interval=1e3/t}},e.pipeline=new e.FramePipeline,e.pipeline.start(),e.TweenController=function(){this.q=[]},e.TweenController.prototype={queue:function(){var t=new e.Tween(this),n=this.q[this.q.length-1];return!n||n&&n.hasCompleted?t.canStart=!0:(t.canStart=!1,n.then(function(){t.canStart=!0,t.start()})),this.q.push(t),t}},e.Tween=function(t){var n=this;n.name="$interpol-"+parseInt(Math.random()*(new Date).getTime()),n.controller=t||new e.TweenController,n.startVal=0,n.endVal=0,n.differences={},n.canStart=!0,n.hasStarted=!1,n.hasCompleted=!1,n.tweenDuration=400,n.delayDuration=0,n.isDelayed=!1,n.repeatCount=0,n.paused=!1,n.easing=e.easing.easeNone,n.onStep=e.noop,n.onComplete=e.noop,n.onStopped=e.noop,n.andThen=e.noop},e.Tween.prototype={from:function(t){return this.startVal=t,this},to:function(t){return this.endVal=t,this},duration:function(t){return this.tweenDuration=t,this},delay:function(t){return this.delayDuration=t,this},repeat:function(t){return this.repeatCount=t,this},ease:function(t){return this.easing=t,this},step:function(t){return this.onStep=t,this},complete:function(t){return this.onComplete=t,this},stopped:function(t){return this.onStopped=t,this},then:function(t){return this.andThen=t,this},reverse:function(){var t=this.startVal,e=this.endVal;this.startVal=e,this.endVal=t,this.start()},start:function(){var t=this;if(!t.canStart)return t;if(t.delayDuration>0&&!t.isDelayed)return setTimeout(function(){t.start()},t.delayDuration),t.isDelayed=!0,t;var n=1e3/e.fps,i=t.tweenDuration/n;if("object"==typeof t.endVal){"object"!=typeof t.startVal&&(t.startVal={});for(var o in t.endVal)t.startVal.hasOwnProperty(o)||(t.startVal[o]=0),t.differences[o]=t.endVal[o]-t.startVal[o]}else t.differences["$itp-main"]=t.endVal-t.startVal;return t.hasStarted=!0,t.stpFn=function(){if(i>=0&&t.hasStarted){var o=t.tweenDuration;o-=i*n,i--;var r=t.differences.hasOwnProperty("$itp-main")?t.easing.call(e.easing,o,t.startVal,t.differences["$itp-main"],t.tweenDuration):{};if("object"==typeof r)for(var a in t.differences)r[a]=t.easing.call(e.easing,o,t.startVal[a],t.differences[a],t.tweenDuration);t.onStep.call(t,r)}else t.hasStarted?(e.pipeline.remove(t.name),t.hasStarted=!1,t.isDelayed=!1,t.repeatCount>0||-1===t.repeatCount||1/0===t.repeatCount?(t.repeatCount=t.repeatCount<0||1/0===t.repeatCount?t.repeatCount:t.repeatCount--,t.onComplete.call(t,t.endVal),t.start()):(t.hasCompleted=!0,t.onComplete.call(t,t.endVal),t.andThen.call(t),t.controller.q.shift())):(e.pipeline.remove(t.name),t.onStopped.call(t))},e.pipeline.add(t.name,t.stpFn),t},stop:function(){return this.hasStarted=!1,this},pause:function(){return e.pipeline.remove(this.name),this},play:function(){return e.pipeline.has(this.name)?void 0:(e.pipeline.add(this.name,this.stpFn),this)},queue:function(){return this.controller.queue()}};var n=function(t){return e.fps=t,e.pipeline.setFPS(e.fps),n};return n.easing=e.easing,n.tween=function(){return new e.Tween},n.queue=function(){return(new e.TweenController).queue()},n.pipeline=e.pipeline,n}),o("undefined"!=typeof Interpol?Interpol:window.Interpol)}.call(n,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e){(function(n){__browserify_shim_require__=t,function(t,e,n,i,o){var r=function(){var t=Date.now(),e=t,n=0,i=1/0,o=0,r=0,a=1/0,s=0,u=0,c=0,l=document.createElement("div");l.id="stats",l.addEventListener("mousedown",function(t){t.preventDefault(),w(++c%2)},!1),l.style.cssText="width:80px;opacity:0.9;cursor:pointer";var d=document.createElement("div");d.id="fps",d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",l.appendChild(d);var f=document.createElement("div");f.id="fpsText",f.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",f.innerHTML="FPS",d.appendChild(f);var h=document.createElement("div");for(h.id="fpsGraph",h.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",d.appendChild(h);h.children.length<74;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#113",h.appendChild(p)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",l.appendChild(m);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",m.appendChild(v);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(g);g.children.length<74;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(p)}var w=function(t){switch(c=t){case 0:d.style.display="block",m.style.display="none";break;case 1:d.style.display="none",m.style.display="block"}},b=function(t,e){var n=t.appendChild(t.firstChild);n.style.height=e+"px"};return{REVISION:11,domElement:l,setMode:w,begin:function(){t=Date.now()},end:function(){var c=Date.now();return n=c-t,i=Math.min(i,n),o=Math.max(o,n),v.textContent=n+" MS ("+i+"-"+o+")",b(g,Math.min(30,30-n/200*30)),u++,c>e+1e3&&(r=Math.round(1e3*u/(c-e)),a=Math.min(a,r),s=Math.max(s,r),f.textContent=r+" FPS ("+a+"-"+s+")",b(h,Math.min(30,30-r/100*30)),e=c,u=0),c},update:function(){t=this.end()}}};o("undefined"!=typeof r?r:window.Stats)}.call(n,void 0,void 0,void 0,void 0,function(t){e.exports=t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e){e.exports={useSound:!1,useInertia:!1,useMessaging:!1,useAccelerometer:!1,useBackgrounds:!1,useContent:!1,useVideo:!1,useGif:!1,normaliseFacialRotation:!1}},{}],5:[function(t,e){var n=t("../../utilites"),i=t("../../config"),o=t("../../messaging"),r={background:"assets/img/{i}.jpg",sides:[{html:function(){return(i.useGif?'<img class="gif" src="assets/img/tes.gif" width="100%" height="100%" /></span><span>':"")+"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p><button>Link out</button>"},onload:function(t){n("button",t).forEach(function(e){e.addEventListener("click",function(){i.useMessaging&&o.post("btn_interaction")}),i.useGif&&n(".gif",t).forEach(function(t){t.addEventListener("touchmove",n.prevent)})})}},{html:function(){return i.useVideo?'<h1>Video</h1><div class="vid"><video src="assets/video/test.mp4" width="100%" height="100%" style="display: none;"></video></div>':"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur euismod erat et libero porta euismod. Ut mollis velit justo, sodales auctor velit viverra et.</p><button>Click me</button>"},onload:function(t){n("button",t).forEach(function(t){t.addEventListener("click",function(){i.useMessaging&&o.post("btn_interaction")})}),i.useVideo&&n(".vid",t).forEach(function(t){t.addEventListener("click",function(){var e=n("video",t)[0];e.style.display="block",e.play()})})}},{html:function(){return"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur euismod erat et libero porta euismod. Ut mollis velit justo, sodales auctor velit viverra et.</p><button>Click me</button>"},onload:function(t){n("button",t).forEach(function(t){t.addEventListener("click",function(){i.useMessaging&&o.post("btn_interaction")})})}},{html:function(){return"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur euismod erat et libero porta euismod. Ut mollis velit justo, sodales auctor velit viverra et.</p><button>Click me</button>"},onload:function(t){n("button",t).forEach(function(t){t.addEventListener("click",function(){i.useMessaging&&o.post("btn_interaction")})})}},{html:function(){return"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur euismod erat et libero porta euismod. Ut mollis velit justo, sodales auctor velit viverra et.</p><button>Click me</button>"},onload:function(t){n("button",t).forEach(function(t){t.addEventListener("click",function(){i.useMessaging&&o.post("btn_interaction")})})}},{html:function(){return"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur euismod erat et libero porta euismod. Ut mollis velit justo, sodales auctor velit viverra et.</p><button>Click me</button>"},onload:function(t){n("button",t).forEach(function(t){t.addEventListener("click",function(){i.useMessaging&&o.post("btn_interaction")})})}}]};e.exports=r},{"../../config":4,"../../messaging":9,"../../utilites":15}],6:[function(t,e){function n(t,e,n){this.width=t||250,this.height=e||250,this.sides=[],this.element=i.getElement("div","cube",{},{width:this.width+"px",height:this.height+"px"}),this.rotation={X:0,Y:0,Z:0};for(var r=this.width/2,a=0;6>a;a++){var s=new o(this.width,this.height,a);this.sides.push(s),this.element.appendChild(s.element),s.rotation.Y=1===a?180:2===a?90:3===a?-90:0,s.rotation.X=4===a?90:5===a?-90:0,s.render()}n=n||i('[role="main"]')[0],n.appendChild(this.element),n.style[i.CSS_TRANSFORM]="translateZ(-"+r+"px)"}var i=t("../utilites"),o=t("./side"),r=t("./matrix");n.prototype.render=function(){this.element.style[i.CSS_TRANSFORM]="rotateX("+this.rotation.X+"deg) rotateY("+this.rotation.Y+"deg) rotateZ("+this.rotation.Z+"deg) translateZ(0)"},n.prototype.normalizeOppositeSide=function(t,e){if("updown"===e){var n=parseInt(t.getAttribute("side"),10)-1,o=i.isEven(n)?n+1:n-1,r=this.sides[o];r.rotation.Z=r.rZ+180,r.render()}},n.prototype.normalizeFace=function(){for(var t=this.rotation,e=Math.abs(i.nearest(t.X,90)%360),n=Math.abs(i.nearest(t.Y,90)%360),o=Math.abs(i.nearest(t.Z,90)%360),a=this.sides.length-1;a>=0;a--){var s=this.sides[a];s.rotation.Z=r[a][e][n][o],s.render()}},n.prototype.getSideFromTarget=function(t){for(var e=t;!/side/.test(e.className);)e=e.parentNode;return e},n.prototype.remove=function(){this.element.parentNode.removeChild(this.element)},e.exports=n},{"../utilites":15,"./matrix":7,"./side":8}],7:[function(t,e){e.exports={0:{0:{0:{0:0,90:270,180:180,270:90},90:{0:0,90:270,180:180,270:90},180:{0:0,90:270,180:180,270:90},270:{0:0,90:270,180:180,270:90}},90:{0:{0:0,90:270,180:180,270:90},90:{0:270,90:180,180:90,270:0},180:{0:180,90:90,180:0,270:270},270:{0:90,90:0,180:270,270:180}},180:{0:{0:180,90:90,180:0,270:270},90:{0:180,90:90,180:0,270:270},180:{0:180,90:90,180:0,270:270},270:{0:180,90:90,180:0,270:270}},270:{0:{0:0,90:270,180:180,270:90},90:{0:90,90:0,180:270,270:180},180:{0:180,90:90,180:0,270:270},270:{0:270,90:180,180:90,270:0}}},1:{0:{0:{0:0,90:90,180:180,270:270},90:{0:0,90:90,180:180,270:270},180:{0:0,90:90,180:180,270:270},270:{0:0,90:90,180:180,270:270}},90:{0:{0:180,90:270,180:0,270:90},90:{0:90,90:180,180:270,270:0},180:{0:0,90:90,180:180,270:270},270:{0:270,90:0,180:90,270:180}},180:{0:{0:180,90:270,180:0,270:90},90:{0:180,90:270,180:0,270:90},180:{0:180,90:270,180:0,270:90},270:{0:180,90:270,180:0,270:90}},270:{0:{0:180,90:270,180:0,270:90},90:{0:270,90:0,180:90,270:180},180:{0:0,90:90,180:180,270:270},270:{0:90,90:180,180:270,270:0}}},2:{0:{0:{0:0,90:270,180:180,270:90},90:{0:0,90:180,180:180,270:180},180:{0:0,90:90,180:180,270:270},270:{0:0,90:0,180:180,270:0}},90:{0:{0:270,90:270,180:270,270:270},90:{0:180,90:180,180:180,270:0},180:{0:90,90:90,180:90,270:90},270:{0:0,90:0,180:0,270:180}},180:{0:{0:180,90:270,180:0,270:90},90:{0:180,90:180,180:0,270:180},180:{0:180,90:90,180:0,270:270},270:{0:180,90:0,180:0,270:0}},270:{0:{0:90,90:90,180:90,270:90},90:{0:180,90:0,180:180,270:180},180:{0:270,90:270,180:270,270:270},270:{0:0,90:180,180:0,270:0}}},3:{0:{0:{0:0,90:270,180:180,270:90},90:{0:0,90:0,180:180,270:0},180:{0:0,90:90,180:180,270:270},270:{0:0,90:180,180:180,270:180}},90:{0:{0:90,90:90,180:90,270:90},90:{0:0,90:180,180:0,270:0},180:{0:270,90:270,180:270,270:270},270:{0:180,90:0,180:180,270:180}},180:{0:{0:180,90:270,180:0,270:90},90:{0:180,90:0,180:0,270:0},180:{0:180,90:90,180:0,270:270},270:{0:180,90:180,180:0,270:180}},270:{0:{0:270,90:270,180:270,270:270},90:{0:0,90:0,180:0,270:180},180:{0:90,90:90,180:90,270:90},270:{0:180,90:180,180:180,270:0}}},4:{0:{0:{0:0,90:270,180:180,270:90},90:{0:90,90:270,180:90,270:90},180:{0:180,90:270,180:0,270:90},270:{0:270,90:270,180:270,270:90}},90:{0:{0:180,90:180,180:180,270:180},90:{0:270,90:90,180:90,270:90},180:{0:0,90:0,180:0,270:0},270:{0:90,90:270,180:270,270:270}},180:{0:{0:0,90:90,180:180,270:270},90:{0:90,90:90,180:90,270:270},180:{0:180,90:90,180:0,270:270},270:{0:270,90:90,180:270,270:270}},270:{0:{0:0,90:0,180:0,270:0},90:{0:90,90:90,180:270,270:90},180:{0:180,90:180,180:180,270:180},270:{0:270,90:270,180:90,270:270}}},5:{0:{0:{0:0,90:270,180:180,270:90},90:{0:270,90:270,180:270,270:90},180:{0:180,90:270,180:0,270:90},270:{0:90,90:270,180:90,270:90}},90:{0:{0:0,90:0,180:0,270:0},90:{0:270,90:270,180:90,270:270},180:{0:180,90:180,180:180,270:180},270:{0:90,90:90,180:270,270:90}},180:{0:{0:0,90:90,180:180,270:270},90:{0:270,90:90,180:270,270:270},180:{0:180,90:90,180:0,270:270},270:{0:90,90:90,180:90,270:270}},270:{0:{0:180,90:180,180:180,270:180},90:{0:90,90:270,180:270,270:270},180:{0:0,90:0,180:0,270:0},270:{0:270,90:90,180:90,270:90}}}}},{}],8:[function(t,e){function n(t){var e=r.sides[this.index];if(a.useBackgrounds){var n=new Image;n.src=o.format(r.background,{i:this.index+1}),n.width=this.width,n.height=this.height,t.appendChild(n)}if(a.useContent){var i=document.createElement("span");i.innerHTML=e.html(),t.appendChild(i),e.onload(t)}return t}function i(t,e,i){this.width=t,this.height=e,this.offset=this.width/2,this.index=i,this.element=n.call(this,o.getElement("div","side no"+(this.index+1),{side:this.index+1},{width:this.width+"px",height:this.height+"px"})),this.rotation={X:0,Y:0,Z:0},this.rZ=this.rotation.Z}var o=t("../utilites"),r=t("./content"),a=t("../config");i.prototype.render=function(){this.rZ=this.rotation.Z,this.element.style[o.CSS_TRANSFORM]="rotateX("+this.rotation.X+"deg) rotateY("+this.rotation.Y+"deg) rotateZ("+this.rotation.Z+"deg) translateZ("+this.offset+"px)"},e.exports=i},{"../config":4,"../utilites":15,"./content":5}],9:[function(t,e){var n,i;window.addEventListener("message",function(t){if(console.log(t),/\.celtra/.test(t.origin))switch(n&&i||(n=t.source,i=t.origin),t.data){case"init":n.postMessage("received_init",i)}});var o={post:function(t){n&&i&&n.postMessage(t,i)}};e.exports=o},{}],10:[function(t,e){function n(t){c.update(p.gamma-t.gamma),l.update(p.beta-t.beta)}function i(){var t=u(),e=l.smooth(4.3),n=c.smooth(4.3);a.rotation[t.UD]=d.nearest(a.rotation[t.UD],90)+s(Math[e>0?"min":"max"](e>0?30:-30,e/1.2)),a.rotation[t.LR]=d.nearest(a.rotation[t.LR],90)-s(Math[n>0?"min":"max"](n>0?30:-30,n/1.2)),a.render()}function o(t){window.addEventListener("deviceorientation",function e(n){p.gamma=n.gamma,p.beta=n.beta,window.removeEventListener("deviceorientation",e),t&&t()})}function r(t,e,n){return a=t,s=e,u=n,c=new f(10),l=new f(10),o(),r}var a,s,u,c,l,d=t("../utilites"),f=t("./valuebuffer"),h=t("interpol"),p={gamma:0,beta:0};r.listen=function(){return window.addEventListener("deviceorientation",n),h.pipeline.add("orient",i),r},r.detach=function(){return window.removeEventListener("deviceorientation",n),h.pipeline.remove("orient"),r},r.reset=function(t){return l.clear(),c.clear(),o(t),r},e.exports=r},{"../utilites":15,"./valuebuffer":11,interpol:2}],11:[function(t,e){function n(t){this.samples=t,this.initBuffer()}n.prototype.initBuffer=function(){this.index=0,this.buffer=[],this.value=0;for(var t=0;t<this.samples;t++)this.buffer.push(0)},n.prototype.update=function(t){var e=this.buffer[this.index],n=t-e;this.index++,this.index===this.samples&&(this.index=0),this.buffer[this.index]=n},n.prototype.sum=function(){return this.buffer.reduce(function(t,e){return t+e},0)},n.prototype.sumPos=function(){return this.buffer.reduce(function(t,e){return t+(e>0?e:0)},0)},n.prototype.sumNeg=function(){return this.buffer.reduce(function(t,e){return t+(0>e?e:0)},0)},n.prototype.average=function(){return this.sum()/this.samples},n.prototype.smooth=function(t){this.value=this.buffer[0];for(var e=1;e<this.samples;e++)this.value+=(this.buffer[e]-this.value)/t;return this.value},n.prototype.clear=function(){for(var t=0;t<this.samples;t++)this.buffer.push(0);this.index=0},n.prototype.last=function(){return this.buffer[this.index]},e.exports=n},{}],12:[function(t,e){var n=t("./context"),i=new n,o=function(t,e){this.context=i,this.sources=t,this.onload=e,this.bufferList=[],this.loadCount=0};o.prototype.loadBuffer=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer";var o=this;n.onload=function(){o.context.decodeAudioData(n.response,function(t){o.bufferList[e]=t,++o.loadCount==o.sources.length&&(this.context=null,i=null,o.onload(o.bufferList))},function(){console.error("error decoding file data: "+t)})},n.onerror=function(){console.error("BufferLoader: XHR error")},n.send()},o.prototype.load=function(){for(var t=0;t<this.sources.length;++t)this.loadBuffer(this.sources[t],t)},e.exports=o},{"./context":13}],13:[function(t,e){e.exports=window.AudioContext||window.webAudioContext||window.webkitAudioContext},{}],14:[function(t,e){function n(t){var e,n=!1,i=new o([t],function(t){n=!0,e=t.pop()});i.load(),this.play=function(){if(n){var t=r.createBufferSource();t.buffer=e,t.onended=function(){t=null},t.connect(r.destination),t.start(0)}}}var i=t("./context"),o=t("./bufferloader"),r=new i;e.exports=n},{"./bufferloader":12,"./context":13}],15:[function(t,e){function n(t){var e=document.createElement("div"),n=null;return t.forEach(function(t){"undefined"!=typeof e.style[t]&&(n=t)}),n}function i(t,e){return Array.prototype.slice.call((e||r).querySelectorAll(t))}var o=window,r=document;i.ready=function(t){return"complete"===r.readyState?setTimeout(t,1):void o.addEventListener("DOMContentLoaded",t)},i.extend=function(){for(var t=[].slice.call(arguments),e=t[0],n=1,i=t.length;i>n;n++){var o=t[n];for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}return e},i.prevent=function(t){t.preventDefault()},i.format=function(t,e){return t.toString().replace(/\{([^}]+)\}/g,function(t,n){return e[n]})},i.nearest=function(t,e){return Math.round(t/e)*e},i.isEven=function(t){return t%2===0},i.isOdd=function(t){return t%2!==0},i.isDefined=function(t){return"undefined"!=typeof t},i.getElement=function(t,e,n,i){var o=r.createElement(t);return o.className=e,Object.keys(n).forEach(function(t){o.setAttribute(t,n[t])}),Object.keys(i).forEach(function(t){o.style[t]=i[t]}),o},i.windowWidth=function(){if("undefined"!=typeof o.innerWidth)return function(){return o.innerWidth};var t="clientWidth"in r.documentElement?r.documentElement:r.body;return function(){return t.clientWidth}}(),i.windowHeight=function(){if("undefined"!=typeof o.innerHeight)return function(){return o.innerHeight};var t="clientHeight"in r.documentElement?r.documentElement:r.body;return function(){return t.clientHeight}}(),i.CSS_TRANSFORM=function(){var t=" ms Moz Webkit O".split(" ").map(function(t){return""===t?"transform":t+"Transform"});return n(t)}(),e.exports=i},{}]},{},[1]);